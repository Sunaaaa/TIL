



# 2019-10-30:Django Model & ORM

# 1. Model

- 장고 MTV 패턴

  - **Model**

    - 특정한 데이터의 구조 (모양)에 대한 정보를 가지고 있다.

      - 데이터의 모양을 정의하는 곳

    - 하나의 모델 클래스는 실제 DB에는 하나의 테이블로 매핑된다. 

    - 컬럼 (column) 들에 대한 정보, 해당 데이터에 대한 정보를 정의하는 곳

      

  - Template

  - View

<br>

## 1.1 Model 로직

> 하나하나 모델에 대한 정보는 Class로 표현한다.
>
> 데이터 베이스 컬럼 (열) 과 어떠한 타입으로 정의할 것인지에 대한 정보를 `django.db.models.Model` 클래스를 상속받아서 정의한다.
>
> **모든 필드들은 NOT NULL 조건**이 붙는다.
>
> 각각의 클래스 변수는 데이터 베이스 필드를 나타낸다.

<br>

### 1.1.1 Model 생성

- models.py

  ```python 
  from django.db import models
  
  # Create your models here.
  # django.db.models.Model 클래스를 상속받아서 모델을 정의함!
  class Article(models.Model):
      # id(PK)는 인스턴스 생성과 함께 자동으로 부여된다.
      # 그래서 model을 정의할 때 따로 작성하지 않아도 된다 .
  
      # 컬럼 
  
      # CharField에서 max_length (최대 길이)는 필수 인자
      # django 내부에서 데이터 유효성 검증을 할 때 사용한다.
      title = models.CharField(max_length=30) 
  
      # 긴 문자열은 TextField를 사용한다.
      content = models.TextField()
  
      # 생성한 날짜 / 수정한 날짜
      # auto_now_add : 생성시점에 자동으로 등록 , 인스턴스 최초 생성 시각
      # auto_now : 인스턴스 최종 수정 시각 (업데이트됨)
      created_at = models.DateTimeField(auto_now_add=True)
      # updated_at = models.DateTimeField(auto_now=True)
  ```

<br>

### 1.1.2 Migration 생성

- 정의한 Model을 데이터 베이스에 반영

- Python 코드만 작성하면 SQL 문을 알아서 작성해준다.

  <br>

  > `makemigrations` 
  >
  > - 실제 데이터 베이스 테이블을 만들기 전에 설계도를 그려보는 작업
  >   - Python 코드로 데이터 베이스 설계도를 작성한다.
  > - migrations 폴더에서 확인할 수 있다.  (`0001_inital.py`, ...)
  >
  > <br>
  >
  > `sqlmigrate`
  >
  > - 데이터 베이스에 실제로 반영되기 전에 SQL 문으로 바꿔볼 수 있다. 
  >   - 설계한 Python 코드가 SQL문으로 바뀐 모습을 확인할 수 있다. 
  >
  >  <br>
  >
  > `showmigrations`
  >
  > - 작성한 migration 설계도가 실제 DB에 반영되었는지 확인
  >
  > <br>
  >
  > `migrate`
  >
  > - `makemigrations`로 만든 **설계도를 실제 데이터 베이스 (sqlite3) 에 반영**한다.

  <br>

  - Migration 파일 (=설계도) 생성

    ```bash
    $python manage.py makemigrations
    ```

    - 생성 결과

    ![1572396093201](https://user-images.githubusercontent.com/39547788/67855405-cd7faf80-fb55-11e9-91ba-0d4db9a21e7e.png)

    <br>

    - 생성 후 프로젝트 구조 

      ![1572396229815](https://user-images.githubusercontent.com/39547788/67855399-cce71900-fb55-11e9-935a-48b3cc048112.png)

      <br>

      - migrations 폴더에 `0001_inital.py` 파일이 생성된다. 

        - 0001_inital.py

          ```bash
          # Generated by Django 2.2.6 on 2019-10-30 00:41
          from django.db import migrations, models
          
          class Migration(migrations.Migration):
          
              initial = True
          
              dependencies = [
              ]
          
              operations = [
                  migrations.CreateModel(
                      name='Article',
                      fields=[
                          ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                          ('title', models.CharField(max_length=30)),
                          ('content', models.TextField()),
                          ('created_at', models.DateTimeField(auto_now_add=True)),
                      ],
                  ),
              ]
          
          ```

          <br>

  - 설계한 Python 코드를 SQL문으로 확인하기

    - sqlmigrate

      ```bash
      $python manage.py sqlmigrate articles 0001
      ```

      - 실행화면

        ![1572396607971](https://user-images.githubusercontent.com/39547788/67855400-cce71900-fb55-11e9-88ec-b504c87bdfaa.png)

        <br>

  - migration 설계도가 실제 DB에 반영되었는지 확인하기

    - showmigrations

      ```bash
      $python manage.py showmigrations
      ```

      - 실행 화면

        ![1572396709397](https://user-images.githubusercontent.com/39547788/67855401-cce71900-fb55-11e9-91ac-645e93d4ce62.png)

  <br>

### 1.1.3 DB에 반영

- 설계도를 실제 DB에 반영한다.

  ```bash
  $python manage.py migrate
  ```

  - 실행 화면

    ![1572396888802](https://user-images.githubusercontent.com/39547788/67855402-cce71900-fb55-11e9-993b-7dec69d91e82.png)



<br>

- 반영된 내역 확인

  ```bash
  $python manage.py showmigrations
  ```

  - 실행 화면

    ![1572397715384](https://user-images.githubusercontent.com/39547788/67855403-cd7faf80-fb55-11e9-8212-3b02e5727065.png)

    <br>



- 속성이 바뀌면 설계도를 위의 과정을 다시 

  - 새로운 설계도 만들기

    ![1572397950794](https://user-images.githubusercontent.com/39547788/67855405-cd7faf80-fb55-11e9-91ba-0d4db9a21e7e.png)

    <br>

    - 실행 화면

      ![1572397994361](https://user-images.githubusercontent.com/39547788/67855406-cd7faf80-fb55-11e9-99e1-1d47490d95e5.png)

      <br>

  - 새로 작성한 설계도 반영하기

    ```bash
    $python manage.py migrate
    ```

    - 실행 화면

      ![1572398047833](https://user-images.githubusercontent.com/39547788/67855407-cd7faf80-fb55-11e9-9fad-99fa56aecfc5.png)

      <br>

  - 새로 작성한 설계도 반영 확인하기

    ```bash
    $python manage.py showmigrations
    ```

    - 실행 화면

      ![1572398088413](https://user-images.githubusercontent.com/39547788/67855408-ce184600-fb55-11e9-991c-d35c2542f94f.png)

      <br>

<br>





### 1.1.4 객체를 표시하는 형식 Customizing

- 객체를 표시하는 형식을 사용자 맞춤형으로 커스터마이징 한다.

  - models.py

    ```python  
    from django.db import models
    
    # Create your models here.
    class Article(models.Model):
        title = models.CharField(max_length=30) 
        content = models.TextField()
        created_at = models.DateTimeField(auto_now_add=True)
        updated_at = models.DateTimeField(auto_now=True)
    
        # 객체를 표시하는 형식 Customizing
        def __str__(self):
            return f'[{self.pk}] : {self.title}'    
    ```

    <br>

  - ipython shell 수행 

    ```python 
    In [4]: from articles.models import Article
    
    In [5]: Article.objects.all()
    Out[5]: <QuerySet [<Article: [1] : first>, <Article: [2] : second>, <Article: [3] : third>]>
    ```

    <br>

    - 실행 화면 

      ![1572401482010](https://user-images.githubusercontent.com/39547788/67855415-cf497300-fb55-11e9-8ea4-98d753408999.png)



<br>

<br>

### [설치]

#### sqlite

- 데이터 베이스에 반영된 것 확인

- sqlite 설치

  ![1572398351789](https://user-images.githubusercontent.com/39547788/67855409-ce184600-fb55-11e9-910f-18764781eb2c.png)

  <br>

- sqlite (데이터 베이스) 보러가기

  - `Ctrl + Shift + p`를 눌러 sqlite 데이터 베이스를 Open할 프로젝트를 선택한다.

    - `Ctrl + Shift + p`

      ![1572423517205](https://user-images.githubusercontent.com/39547788/67855437-d1abcd00-fb55-11e9-8ced-8e6a16825cb4.png)

      <br>

    - 프로젝트 선택

      ![1572423541317](https://user-images.githubusercontent.com/39547788/67855439-d1abcd00-fb55-11e9-95da-8dd0c3f0f4f6.png)

      <br>

    - 실행 결과 아래와 같이 `SQLITE EXPLORER` 메뉴 탭이 생성된다. 

      ![1572423670006](https://user-images.githubusercontent.com/39547788/67855440-d1abcd00-fb55-11e9-88f6-fd94fac70d8a.png)

      <br>

    -  `SQLITE EXPLORER`  메뉴를 열어 재생 버튼을 누르면, Model을 토대로 생성된 데이터베이스를 확인할 수 있다.

      - 구조 

        ![1572423750842](https://user-images.githubusercontent.com/39547788/67855441-d1abcd00-fb55-11e9-8fe3-4e540ad87d37.png)

        <br>

      - 데이터 베이스 확인

        ![1572423797015](https://user-images.githubusercontent.com/39547788/67855442-d2446380-fb55-11e9-8658-6866f7e245b2.png)

<br>

<br>



#### ipython

- python 개발을 도와주는 interactive한 쉘

- ipython 설치

  ```bash
  $ pip install ipython
  ```

  - 설치 확인

    ![1572398657752](https://user-images.githubusercontent.com/39547788/67855410-ce184600-fb55-11e9-83d3-cbb165508031.png)

    <br>

    - `pip list`

      ![1572398707931](https://user-images.githubusercontent.com/39547788/67855411-ceb0dc80-fb55-11e9-970e-c05ad112c7de.png)

      <br>

- django 안의 manage.py 에 들어가서 shell을 실행한다.

  ```bash
  $ python manage.py shell
  ```

  <br>

  - 실행 화면

    ![1572398790631](https://user-images.githubusercontent.com/39547788/67855412-ceb0dc80-fb55-11e9-9dc1-ba15325637c0.png)

    <br>

- Articles 모델을 가져온다.

  ```python 
  In[1]: from articles.models import Article
  ```

  <br>

  - 실행 화면

    ![1572398873520](https://user-images.githubusercontent.com/39547788/67855413-ceb0dc80-fb55-11e9-9ac6-b947adcea3c5.png)



<br>

<br>



# 2. ORM (Objected Relation Mapping)

> 우리는 앞으로 데이터 베이스에 SQL 쿼리문을 날려서 데이터를 조작하는 것이 아니라, ORM을 통해 클래스의 인스턴스 객체로 데이터 베이스를 조작한다.
>
> Why ORM?
>
> - SQL 문에 종속되지 않고 데이터를 객체 형태로 다룰 수 있다.
> - 프로그래밍 언어만 알아도 데이터 베이스를 다룰 수 있다.

<br>

- 데이터를 객체로 생각해서 접근한다.
  - ORM으로 CRUD를 구현!
- 객체 지향형 파이썬 언어로 코드를 작성해서 보내면 적절한 쿼리문으로 변환 하여,  파이썬에서 다루기 좋은 형태로 반환한다.

<br>



## 2.1 ORM 형식

### 2.1.1 ORM return

#### QuerySet 

- 다수의 객체가 담김 
- Python List를 다루는 것과 비슷

<br>

#### Query

- 단일 객체



### 2.1.2 ORM 코드

#### `모델명.objects.명령`

- objects 
  - 모델 클래스 정보를 토대로 실제 데이터 베이스에 쿼리 (SQL) 를 날려서 데이터 베이스와 의사소통하는 통역사 (매니저) 역할



## [CRUD 맛보기]

## 2.2 C 

> CREATE
>
> 객체를 생성하는 방법은 세가지가 있다. 
>
> 1. 기본 생성자를 이용해, 각 컬럼마다 데이터를 지정한다.
> 2. 생성자를 이용해 인자로 컬럼의 데이터를 지정한다.
> 3. ORM의 create() 함수 이용
>
> 1과 2번 방법의 경우, **실제 데이터 베이스에 반영되기 위해 save() 함수를 반.드.시 호출**해야 한다.

<br>

### 2.2.1 첫번째 방법

- 객체를 생성하고, 객체의 컬럼 하나하나에 데이터를 입력한다.

- save() 를 하기 전에는 DB에 반영되지 않는다. 

  - [인스턴스].save()

    - 데이터 베이스에 저장

      ```python
      In [3]: article = Article()
      
      In [4]: article
      Out[4]: <Article: Article object (None)>
      
      In [5]: article.title = 'first'
      
      In [6]: article.content = 'django'
      
      In [7]: article.title
      Out[7]: 'first'
      
      ---------------------------------------------------------------------------
      
      In [9]: article.content
      Out[9]: 'django'
      
      In [10]: article
      Out[10]: <Article: Article object (None)>
      
      In [11]: Article.objects.all()
      Out[11]: <QuerySet []>
      
      In [12]: article.save()
      
      In [13]: article
      Out[13]: <Article: Article object (1)>
      
      In [14]: Article.objects.all()
      Out[14]: <QuerySet [<Article: Article object (1)>]>
      ```

<br>

### 2.2.2 두번째 방법

- 함수에서 키워드 인자를 넘겨주는 방식으로 생성할 수 있다. 

- save() 를 하기 전에는 DB에 반영되지 않는다. 

  - [인스턴스].save()

    - 데이터 베이스에 저장

      ```python 
      In [15]: article = Article(title='second', content='python')
      
      In [16]: article.title
      Out[16]: 'second'
      
      In [17]: article.content
      Out[17]: 'python'
      
      In [18]: article
      Out[18]: <Article: Article object (None)>
      
      In [19]: Article.objects.all()
      Out[19]: <QuerySet [<Article: Article object (1)>]>
      
      In [20]: article.save()
      
      In [21]: article
      Out[21]: <Article: Article object (2)>
      
      In [22]: Article.objects.all()
      Out[22]: <QuerySet [<Article: Article object (1)>, <Article: Article object (2)>]>
      ```

<br>

### 2.2.3 세번째 방법

- Query Set 객체 생성과 DB 저장을 한번에 해결할 수 있다. 

  - create()

    - 데이터 베이스에 바로 저장 및 반영된다.

      ```python
      In [24]: Article.objects.create(title='third', content='java')
      Out[24]: <Article: Article object (3)>
      
      In [25]: Article.objects.all()
      Out[25]: <QuerySet [<Article: Article object (1)>, <Article: Article object (2)>, <Article: Article object (3)>]>
      ```

<br>

### 2.2.4 반영 결과 확인!

- 결과 화면

  ![1572399616834](https://user-images.githubusercontent.com/39547788/67855414-ceb0dc80-fb55-11e9-9704-33ae33e74749.png)

  <br>



### 2.2.5 유효성 검사

- 기본적으로 Not Null 조건이 붙는다.

- 유효성 검사로 활용 가능

  ```python
  In [26]: article.full_clean()
  ```

  <br>



## 2.3 R

> READ
>
> 데이터 베이스에서 데이터를 조회하는 여러가지 방법이 있다.
>
> filter() , get, order_by(), type(), ...
>
> - Python list와 비슷한 Query Set을 return 한다.

<br>



### 2.3.1 all()

- 모든 데이터를 Query Set 으로 리턴한다.

  ```python 
  In [1]: Article
  Out[1]: articles.models.Article
  
  In [2]: articles = Article.objects.all()
  
  In [3]: articles
  Out[3]: <QuerySet [<Article: [1] : first>, <Article: [3번글] : third | java>, <Article: [4] : first>]>
  ```

  

### 2.3.2 filter()

- **Query Set으로 return 한다.**

  - 실습을 위해 'first'를 하나 더 추가한다.

  - 기본적으로 filter() 는 Query Set을 return 한다.

    ```python 
    In [6]: articles = Article.objects.filter(title='first')
    
    In [7]: articles
    Out[7]: <QuerySet [<Article: [1] : first>]>
    
    In [8]: Article.objects.create(title='first', content='gogogo')
    Out[8]: <Article: [4] : first>
    
    In [9]: articles = Article.objects.filter(title='first')
    
    In [10]: articles
    Out[10]: <QuerySet [<Article: [1] : first>, <Article: [2] : second>, <Article: [3] : third>, <Article: [4] : first>]>
    ```

  <br>

- 단, 하나의 값을 filter하는 경우는 Query를 return 한다.

  - **first()** : 첫번째 데이터를 return 한다.

    ```python 
    In [11]: articles = Article.objects.filter(title='first').first()
    
    In [12]: articles
    Out[12]: <Article: [1] : first>
    ```

    <br>

- filter의 특정 조건 설정

  - 결과 값이 여러 개일 수 있기 때문에 Query Set을 return 한다.

    - pk값으로 filter()

      ```python
      In [14]: Article.objects.filter(pk=10)
      Out[14]: <QuerySet []>
      
      In [15]: Article.objects.filter(pk=1)
      Out[15]: <QuerySet [<Article: [1] : first>]>
      ```

      <br>

    - 특정 문자열로 filter() - `title__contain`

      ```python 
      In [21]: articles = Article.objects.filter(title__contains='fir')
      
      In [22]: articles
      Out[22]: <QuerySet [<Article: [1] : first>, <Article: [4] : first>]>
      ```

    <br>

    - 시작하는 단어로 filter() - `title__startswith`

      ```python 
      In [23]: articles = Article.objects.filter(title__startswith='first')
      
      In [24]: articles
      Out[24]: <QuerySet [<Article: [1] : first>, <Article: [4] : first>]>
      
      In [25]: articles = Article.objects.filter(title__startswith='f')
      
      In [26]: articles
      Out[26]: <QuerySet [<Article: [1] : first>, <Article: [4] : first>]>
      ```

    <br>

    - 끝나는 단어로 filter() - `title__endswith`

      ```python 
      In [27]: articles = Article.objects.filter(title__endswith='d')
      
      In [28]: articles
      Out[28]: <QuerySet [<Article: [2] : second>, <Article: [3] : third>]>
      ```

      <br><br>



### 2.3.3 get()

- 반드시 filter를 사용한다.

  - 복수형을 return 하는 에러를 뿜는다.

    ![1572401798568](https://user-images.githubusercontent.com/39547788/67855416-cf497300-fb55-11e9-9c5a-7a071c8804a0.png)



<br>



### 2.3.4 order_by()

- 정렬

  - `-` : 내림차순

    ```python 
    In [16]: Article.objects.order_by('pk')
    Out[16]: <QuerySet [<Article: [1] : first>, <Article: [2] : second>, <Article: [3] : third>, <Article: [4] : first>]>
    
    In [17]: Article.objects.order_by('-pk')
    Out[17]: <QuerySet [<Article: [4] : first>, <Article: [3] : third>, <Article: [2] : second>, <Article: [1] : first>]>
    ```



<br>

### 2.3.5 Type 확인

- 각 명령어에 따라 return 되는 데이터 Type이 다르다.

  - Query Set

  - Query

    ```python 
    In [19]: type(Article.objects.order_by('-pk'))
    Out[19]: django.db.models.query.QuerySet
    
    In [20]: type(Article.objects.get(pk=1))
    Out[20]: articles.models.Article
    ```

    <br>



### 2.3.6 Query String을 list로 다루기

- list처럼 사용할 수 있다.

  ```python 
  In [18]: Article.objects.all()[1:3]
  Out[18]: <QuerySet [<Article: [2] : second>, <Article: [3] : third>]>
  ```



<br>

## 2.4 U 

> UPDATE
>
> - get() 을 이용해 데이터의 값을 수정한다.
> -  sqlite에 수정한 데이터를 반영하기 위해 **반.드.시 save()**  

<br>

- update

  ```python 
  # 수정할 인스턴스 가져오기
  In [29]: article = Article.objects.get(pk=2)
  
  In [30]: article
  Out[30]: <Article: [2] : second>
  
  # 인스턴스의 값을 수정하기
  In [31]: article.title = 'update_second'
  
  # 데이터 베이스에 반영하기
  In [32]: article.save()
  ```

  <br>

  - 변경 전

    ![1572402443349](https://user-images.githubusercontent.com/39547788/67855417-cf497300-fb55-11e9-8d1d-e2def2331980.png)

    <br>

  - 변경 후

    ![1572402477924](https://user-images.githubusercontent.com/39547788/67855418-cf497300-fb55-11e9-9ab8-327348f1bf57.png)



<br>

## 2.5 D

> DELETE
>
> - get() 을 이용해 데이터를 삭제한다.
> - save()를 하지 않아도 자동으로 sqlite에 반영이 된다. 

<br>

- delete

  ```python 
  # 삭제할 인스턴스 가져오기
  In [33]: article = Article.objects.get(pk=2)
  
  In [34]: article
  Out[34]: <Article: [2] : update_second>
  
  # 삭제하기
  In [35]: article.delete()
  Out[35]: (1, {'articles.Article': 1})
  ```

  <br>

  - 삭제 전

    ![1572402477924](https://user-images.githubusercontent.com/39547788/67855418-cf497300-fb55-11e9-9ab8-327348f1bf57.png)

    <br>

  - 삭제 후

    ![1572402897725](https://user-images.githubusercontent.com/39547788/67855419-cfe20980-fb55-11e9-99d3-8680195ef428.png)

    <br>

  - delete는 자동으로 sqlite에 반영이 된다. 

    그러므로 save()를 하지 않는다.

    - 만약, save()를 수행하면 그 밑에 새로운 객체가 추가되는 오류 상황이 발생하더라!

  

<br>

## 2.6 관리자 생성

> 데이터가 정상적으로 저장됐는지 확인하기 위해 admin 페이지로 들어가보자.
>
> - admin 계정을 생성한다.
> - admin의 메인 페이지에 

<br>

- 서버를 실행하고 `http://127.0.0.1:8000/admin`로 진입한다.

- 생성 코드

  ```bash
  $ python manage.py createsuperuser
  ```

  - 관리자 계정을 생성해서 위의 URL에서 로그인

    ![1572408787524](https://user-images.githubusercontent.com/39547788/67855421-cfe20980-fb55-11e9-822c-4cb38f6ad046.png)

    <br>

  - 로그인 페이지

    ![1572408892814](https://user-images.githubusercontent.com/39547788/67855423-cfe20980-fb55-11e9-8e8b-b756f7f0bfc1.png)

    <br>

  - 로그인 후 admin 페이지

    ![1572408940274](https://user-images.githubusercontent.com/39547788/67855425-cfe20980-fb55-11e9-96aa-cc8fd265a459.png)

    <br>



### 2.6.1 관리자 폼 Customizing

> 자동으로 생성된 관리자 사이트를 커스터마이징 할 수 있다. 
>
> 관리 폼이 보이고 작동하는 방법을 커스터마이징 해보자!
>
> - 객체를 등록 할 때 Django에 원하는 옵션을 알려준다.
>
> [참고](https://docs.djangoproject.com/ko/2.2/intro/tutorial07/)

<br>

#### Default 폼

- `admin.site.register(Article)`

  - Article Model을 `admin.site.register(Article)`에 등록한다. 

  - admin.py

    ```python 
    from django.contrib import admin
    from .models import Article
    
    # Register your models here.
    admin.site.register(Article)
    ```

    <br>

  - 위의 코드를 작성한 뒤, admin  페이지를 새로고침

    ![1572408978961](https://user-images.githubusercontent.com/39547788/67855427-d07aa000-fb55-11e9-88fb-268fc2b44262.png)



<br>

#### Customizing 폼

- 객체를 등록 할 때 Django에 원하는 옵션을 알린다.

  - ModelAdmin 커스터 마이징 하기

    - models.py

      ```python 
      from django.contrib import admin
      from .models import Article
      
      # Register your models here.
      
      # 커스터 마이징한 ModelAdmin
      class ArticleAdmin(admin.ModelAdmin):
          list_display = ('pk', 'title', 'content', 'created_at', 'updated_at')
      
      admin.site.register(Article, ArticleAdmin)
      ```

      <br>

    - 실행 화면 

      ![1572409568698](https://user-images.githubusercontent.com/39547788/67855429-d07aa000-fb55-11e9-8060-a5457cf81c37.png)

    <br>

- filter 옵션

  - `list_filter = ( [컬럼] , )`

    - 형식 

      ```python 
      list_filter = [튜플]
      ```

    - created_at으로 filter

      ```python 
      from django.contrib import admin
      from .models import Article
      
      # Register your models here.
      
      # 커스터 마이징한 ModelAdmin
      class ArticleAdmin(admin.ModelAdmin):
          list_display = ('pk', 'title', 'content', 'created_at', 'updated_at')
          list_filter = ('create_at',)
      
      admin.site.register(Article, ArticleAdmin)
      ```

      - 실행 화면

        ![1572409820294](https://user-images.githubusercontent.com/39547788/67855430-d07aa000-fb55-11e9-8c9f-f84677854f9d.png)

        created_at

    - title로 filter

      ```python 
      from django.contrib import admin
      from .models import Article
      
      # Register your models here.
      
      # 커스터 마이징한 ModelAdmin
      class ArticleAdmin(admin.ModelAdmin):
          list_display = ('pk', 'title', 'content', 'created_at', 'updated_at')
          list_filter = ('title',)
      
      admin.site.register(Article, ArticleAdmin)
      ```

      - 실행 화면

        ![1572409933214](https://user-images.githubusercontent.com/39547788/67855432-d07aa000-fb55-11e9-9ab7-276a011c24ff.png)

        

        <br>

    - created_attitle로 filter

      ```python
      from django.contrib import admin
      from .models import Article
      
      # Register your models here.
      
      # 커스터 마이징한 ModelAdmin
      class ArticleAdmin(admin.ModelAdmin):
          list_display = ('pk', 'title', 'content', 'created_at', 'updated_at')
          list_filter = ('created_at','title',)
      
      admin.site.register(Article, ArticleAdmin)
      ```

      <br>

      - 실행 화면

        ![1572434812134](https://user-images.githubusercontent.com/39547788/67855447-d2dcfa00-fb55-11e9-9daa-8493be3182ee.png)

        <br>

  - 링크 설정

    - `list_display_links`

      ```python 
      from django.contrib import admin
      from .models import Article
      
      # Register your models here.
      
      # 커스터 마이징한 ModelAdmin
      class ArticleAdmin(admin.ModelAdmin):
          list_display = ('pk', 'title', 'content', 'created_at', 'updated_at')
          list_display_links = ('title',)
          list_filter = ('created_at','title',)
      
      admin.site.register(Article, ArticleAdmin)
      
      ```

    - 실행 화면

      ![1572434761441](https://user-images.githubusercontent.com/39547788/67855443-d2446380-fb55-11e9-89d2-4056f19f4616.png)

      <br>

  - list에서 바로 수정 가능 하도록

    - list_editable

      ```
      from django.contrib import admin
      from .models import Article
      
      # Register your models here.
      
      # 커스터 마이징한 ModelAdmin
      class ArticleAdmin(admin.ModelAdmin):
          list_display = ('pk', 'title', 'content', 'created_at', 'updated_at')
          # list_display_links = ('title',)
          list_filter = ('created_at','title',)
          list_editable = ('title',)
      
      admin.site.register(Article, ArticleAdmin)
      
      ```

      - 실행 화면

        ![1572434775802](https://user-images.githubusercontent.com/39547788/67855444-d2446380-fb55-11e9-94f7-7ea5212341ba.png)

        <br>

  - 한 페이지에 list 몇개?

    - `list_per_page`

      ```python 
      from django.contrib import admin
      from .models import Article
      
      # Register your models here.
      
      # 커스터 마이징한 ModelAdmin
      class ArticleAdmin(admin.ModelAdmin):
          list_display = ('pk', 'title', 'content', 'created_at', 'updated_at')
          # list_display_links = ('title',)
          list_filter = ('created_at','title',)
          list_editable = ('title',)
          list_per_page = 2
      
      admin.site.register(Article, ArticleAdmin)
      
      ```

      - 실행 화면

        ![1572434787871](https://user-images.githubusercontent.com/39547788/67855446-d2446380-fb55-11e9-92f8-b9341e7fed6c.png)

  <br>



## 2.6 Django-Extensions

> 기본 Django Shell은 직접 모델을 import 해주어야 하는 불편함이 있었지만, `shell_plus`는 **필요한 모델을 자동으로 import** 해주기 때문에 편리하다.

<br>

- Django Shell 설치하기

  - 자동으로 Model Import 설치해주는 django-extensions를 설치한다.

    ```bash
    $pip install django-extensions
    ```

    ![1572411796927](https://user-images.githubusercontent.com/39547788/67855435-d1133680-fb55-11e9-983b-1ef7ca3223f1.png)

<br>

- Application 등록하기

  - config/ setting.py

    ```python 
    INSTALLED_APPS = [
        # local apps
        'articles',
    
        # Third party app
        'django_extensions',
        .
        .
        .
    ]
    ```

    <br>

    ![1572434887463](https://user-images.githubusercontent.com/39547788/67855398-cc4e8280-fb55-11e9-8602-f6ee25aefdee.png)

    <br>

  

- Django Shell 실행하기

  ```bash
  $python manage.py shell_plus
  ```

  - 실행 화면

    ![1572412073795](https://user-images.githubusercontent.com/39547788/67855436-d1133680-fb55-11e9-93cb-a7288300f74b.png)





<br>

